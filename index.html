<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ä¸™åˆé¦¬å¹´è³€æ­² - æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ</title>
    <!-- è¼‰å…¥å¿…è¦å¥—ä»¶ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* è¼‰å…¥ Noto Sans TC ç¢ºä¿è³ªæ„Ÿèˆ‡æˆªåœ–ä¸€è‡´ */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcf8f2;
            -webkit-tap-highlight-color: transparent;
            margin: 0; padding: 0;
        }

        /* å„²å­˜æç¤ºå‹•ç•« */
        @keyframes handPulse {
            0%, 100% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(8px) scale(0.9); opacity: 0.8; }
        }
        .animate-hand {
            animation: handPulse 1.5s infinite ease-in-out;
        }

        /* ä»‹é¢æ’åœ–æ¼‚æµ®å‹•æ…‹ */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* æ”¯æ´æ‰‹æ©Ÿé•·æŒ‰å­˜åœ– */
        .saveable-image {
            -webkit-touch-callout: default !important;
            user-select: none;
            cursor: pointer;
            width: 100%;
            display: block;
            border-radius: 2rem;
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.3);
        }

        /* èƒŒæ™¯æ¸²æŸ“ç•«å¸ƒå®šä½ */
        #render-canvas {
            position: fixed;
            left: -9999px;
            top: 0;
            opacity: 0.01;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // ============================================================
        // ğŸ–¼ï¸ åœ–ç‰‡é€£çµå®šç¾©å€ (æ‚¨å¯ä»¥åœ¨æ­¤æ›¿æ›æ‰€æœ‰åœ–æª”)
        // ============================================================
        
        // 1. ç¬¬ä¸€é ä»‹é¢ä¸Šæ–¹èˆ‡ Header çš„é¦¬å…’åœ–ç‰‡
        const HEADER_IMG_URL = "https://img.freepik.com/free-vector/cute-horse-cartoon-vector-icon-illustration-animal-nature-icon-concept-isolated-premium-vector_138676-5412.jpg"; 

        // 2. è³€å¡ä¸‹åŠéƒ¨èƒŒæ™¯çš„ã€Œå…«è§’å½¢è£é£¾ã€åœ–æª”é€£çµ (ç¾åœ¨å¯ä»¥æ›¿æ›äº†ï¼)
        // å»ºè­°ä½¿ç”¨å¸¶é€æ˜èƒŒæ™¯çš„ PNG æª”æ¡ˆ
        const OCTAGON_PATTERN_URL = "https://img.freepik.com/free-vector/polygonal-shape-collection_23-2148197711.jpg"; 

        // 3. è³€å¡å·¦ä¸‹æ–¹çš„æ’åœ–é€£çµ (åŸé‡‘å…ƒå¯¶è™•)
        const LEFT_DECO_IMG_URL = "https://img.freepik.com/free-vector/gold-ingot-cartoon-vector-icon-illustration-wealth-concept-isolated-premium-vector_138676-5412.jpg"; 

        // 4. è³€å¡å³ä¸‹æ–¹çš„æ’åœ–é€£çµ (åŸé‡‘å…ƒå¯¶è™•)
        const RIGHT_DECO_IMG_URL = "https://img.freepik.com/free-vector/gold-ingot-cartoon-vector-icon-illustration-wealth-concept-isolated-premium-vector_138676-5412.jpg"; 

        // ============================================================

        const Icon = ({ name, size = 24, className = "" }) => {
            useEffect(() => { if (window.lucide) lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [step, setStep] = useState(1);
            const [selectedWish, setSelectedWish] = useState(null);
            const [randomBlessing, setRandomBlessing] = useState('');
            const [userImage, setUserImage] = useState(null);
            const [userName, setUserName] = useState('');
            const [isGenerating, setIsGenerating] = useState(false);
            const [finalImageUrl, setFinalImageUrl] = useState('');
            const canvasRef = useRef(null);

            const wishes = [
                { id: 'wealth', label: 'è²¡å¯Œ', color: '#FEF3C7', icon: "coins", blessings: ["é¦¬ä¸Šæœ‰éŒ¢ è²¡æºå»£é€²", "é§¿é¦¬å ±å–œ è²¡åº«å……ç›ˆ", "é‡‘é¦¬éŠœå¯¶ è¬äº‹å¤§å‰", "è²¡æ°£äº¨é€š é¦¬é‹ç•¶é ­"] },
                { id: 'career', label: 'äº‹æ¥­', color: '#DBEAFE', icon: "briefcase", blessings: ["é¦¬åˆ°æˆåŠŸ é´»åœ–å¤§å±•", "é©å‹‡å¦‚é¦¬ æ¥­ç¸¾é•·ç´…", "ç­–é¦¬æšé­ æ­¥æ­¥é«˜å‡", "è¬é¦¬å¥”é¨° æ——é–‹å¾—å‹"] },
                { id: 'health', label: 'å¥åº·', color: '#DCFCE7', icon: "activity", blessings: ["é¾é¦¬ç²¾ç¥ èº«é«”å¥åº·", "æ´»åŠ›å¦‚é¦¬ å£½æ¯”å—å±±", "ç¥¥é¦¬ç»ç‘ é—”å®¶å®‰åº·", "é¾é¦¬å£¯å¥ ç¦æ°£é€£é€£"] },
                { id: 'love', label: 'æ„›æƒ…', color: '#FFE4E6', icon: "heart", blessings: ["ç­–é¦¬æƒ…æ·± å¹¸ç¦ç¾æ»¿", "é¾é¦¬é›™é£› æ©æ„›ç™¾å¹´", "ç¥¥é¦¬ç¹«ç·£ ç”œèœœä¸€ç”Ÿ", "é§¿é¦¬å¼•è·¯ ç·£å®šä»Šç”Ÿ"] },
                { id: 'marriage', label: 'å©šå§»', color: '#F3E8FF', icon: "smile", blessings: ["å¤©ä½œä¹‹åˆ é¦¬ä¸Šæœ‰å–œ", "é¾é¦¬è‰¯ç·£ ç™¾å¹´å¥½åˆ", "ç¥¥é¦¬å ±å–œ æ°¸çµåŒå¿ƒ", "é‡‘é¦¬é€£ç† æ©æ„›é•·ä¹…"] },
                { id: 'relation', label: 'é—œä¿‚', color: '#FDF2F8', icon: "users", blessings: ["é§¿é¦¬å¼•è·¯ è²´äººç›¸éš¨", "é¾é¦¬åŒè¡Œ ä¼¯æ¨‚è­˜å›", "é§¿é¦¬å¥”é¨° å»£çµå–„ç·£", "é‡‘é¦¬ç‰½ç·š è²´äººç›ˆé–€"] }
            ];

            const handleSelectWish = (wish) => {
                const randomIndex = Math.floor(Math.random() * wish.blessings.length);
                setSelectedWish(wish);
                setRandomBlessing(wish.blessings[randomIndex]);
                setStep(2);
            };

            const handleFileUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => { setUserImage(event.target.result); setStep(3); };
                    reader.readAsDataURL(file);
                }
            };

            useEffect(() => {
                const generateCard = async () => {
                    if (step === 3 && canvasRef.current && userImage && selectedWish) {
                        setIsGenerating(true);
                        const canvas = canvasRef.current;
                        const ctx = canvas.getContext('2d');
                        
                        const loadImage = (src) => {
                            return new Promise((resolve) => {
                                const img = new Image();
                                img.crossOrigin = "anonymous"; 
                                img.src = src;
                                img.onload = () => resolve(img);
                                img.onerror = () => resolve(null);
                            });
                        };

                        const [userImg, leftDeco, rightDeco, octagonImg] = await Promise.all([
                            loadImage(userImage),
                            loadImage(LEFT_DECO_IMG_URL),
                            loadImage(RIGHT_DECO_IMG_URL),
                            loadImage(OCTAGON_PATTERN_URL)
                        ]);

                        drawFinalCard(ctx, canvas, userImg, leftDeco, rightDeco, octagonImg);
                        
                        // ğŸš€ ç·©è¡æ™‚é–“ç¢ºä¿æ‰€æœ‰åƒç´ å¯«å…¥ Canvas
                        setTimeout(() => {
                            const dataUrl = canvas.toDataURL('image/png');
                            setFinalImageUrl(dataUrl);
                            setIsGenerating(false);
                        }, 1200);
                    }
                };
                generateCard();
            }, [step, selectedWish, userImage, randomBlessing, userName]);

            const drawFinalCard = (ctx, canvas, userImg, leftDeco, rightDeco, octagonImg) => {
                canvas.width = 1000;
                canvas.height = 2000;

                // 1. åº•å±¤å®£ç´™
                ctx.fillStyle = '#fdfbf7'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // 2. ç´…è‰²èƒŒæ™¯
                ctx.save();
                ctx.globalAlpha = 0.95; ctx.fillStyle = '#C8102E'; 
                drawRect(ctx, 40, 40, 920, 1920, 60);
                ctx.fill(); 
                ctx.restore();

                // 3. é‡‘è‰²è™›ç·šæ¡†
                ctx.save();
                ctx.strokeStyle = 'rgba(253, 230, 138, 0.7)'; ctx.lineWidth = 12; ctx.setLineDash([20, 15]);
                drawRect(ctx, 70, 70, 860, 1860, 40); ctx.stroke(); 
                ctx.restore();

                // 4. ä½¿ç”¨è€…ç…§ç‰‡è£åˆ‡
                if (userImg) {
                    const px = 100, py = 130, pw = 800, ph = 750;
                    ctx.save(); 
                    drawRect(ctx, px, py, pw, ph, 50); 
                    ctx.clip(); 
                    const ratio = userImg.width / userImg.height;
                    const target = pw / ph;
                    let dW, dH, dX, dY;
                    if (ratio > target) { dW = userImg.width * (ph / userImg.height); dH = ph; dX = px - (dW - pw) / 2; dY = py; }
                    else { dW = pw; dH = userImg.height * (pw / userImg.width); dX = px; dY = py - (dH - ph) / 2; }
                    ctx.drawImage(userImg, dX, dY, dW, dH); 
                    ctx.restore(); 
                }

                // ğŸš€ å¼·è¡Œé‡ç½®ç¹ªåœ–ç‹€æ…‹
                ctx.setTransform(1, 0, 0, 1, 0, 0); 
                ctx.beginPath();
                ctx.globalAlpha = 1.0;
                ctx.setLineDash([]);
                ctx.globalCompositeOperation = 'source-over';

                // 5. æ–‡å­—ç¹ªè£½
                ctx.fillStyle = '#FDE68A'; 
                ctx.textAlign = 'center';
                
                // å…«å­—è³€è©
                ctx.font = 'bold 95px "Noto Sans TC", sans-serif'; 
                ctx.fillText(randomBlessing, 500, 1050);
                
                // 2026 ä¸™åˆé¦¬å¹´
                ctx.font = 'bold 44px "Noto Sans TC", sans-serif'; 
                ctx.fillText(`2026 ä¸™åˆé¦¬å¹´ Â· é¡˜æ‚¨${selectedWish.label}å¦‚æ„`, 500, 1140);
                
                // ç½²å
                if (userName) { 
                    ctx.font = 'bold 52px "Noto Sans TC", sans-serif'; 
                    ctx.fillText(`${userName} æ•¬è³€`, 500, 1230); 
                }

                // ğŸš€ æ ¸å¿ƒè®Šæ›´ï¼šç¾åœ¨ä½¿ç”¨åœ–ç‰‡æ›¿æ›åŸæœ¬çš„å…«è§’å½¢ç¹ªåœ–æŒ‡ä»¤
                const octSize = 210; // åŠå¾‘ 105px å°æ‡‰ç›´å¾‘ 210px
                if (octagonImg) {
                    // å·¦å´èƒŒæ™¯è£é£¾
                    ctx.drawImage(octagonImg, 220 - octSize/2, 1400 - octSize/2, octSize, octSize);
                    // å³å´èƒŒæ™¯è£é£¾
                    ctx.drawImage(octagonImg, 780 - octSize/2, 1550 - octSize/2, octSize, octSize);
                } else {
                    // å‚™æ¡ˆï¼šå¦‚æœåœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œå‰‡ç¶­æŒåŸæœ¬çš„é¡è‰²æ–¹å¡Šæˆ–ç¹ªåœ–
                    drawSeal(ctx, 220, 1400, 105, '#FDE68A');
                    drawSeal(ctx, 780, 1550, 105, '#FDE68A');
                }

                // 6. ğŸš€ å·¦å³è‡ªå®šç¾©æ’åœ–ç¹ªè£½ (å‰æ™¯è£é£¾ï¼Œå¦‚é‡‘å…ƒå¯¶)
                const iSize = 130; 
                if (leftDeco) {
                    ctx.drawImage(leftDeco, 50, 1550, iSize, iSize);
                }
                if (rightDeco) {
                    ctx.drawImage(rightDeco, 820, 1380, iSize, iSize);
                }

                // 7. å‰ç¥¥å°ç«  (ä¸­å¤®åº•éƒ¨ï¼ŒåŒ…å«åŸæœ¬çš„å…«è§’å½¢åº•åœ–èˆ‡å‹•æ…‹æ–‡å­—)
                const stampY = 1620;
                const luckText = ["é¦¬åˆ°æˆåŠŸ", "é¾é¦¬ç²¾ç¥", "ä¸€é¦¬ç•¶å…ˆ", "è¬é¦¬å¥”é¨°"].find(t => !randomBlessing.includes(t)) || "é¦¬åˆ°æˆåŠŸ";
                
                // ä¸­å¤®å°ç« çš„åº•åœ–ä¹Ÿå¯ä»¥æ›æˆåœ–ç‰‡ï¼Œé€™è£¡ç¤ºç¯„ç¶­æŒç¹ªåœ–æŒ‡ä»¤ä»¥ç¢ºä¿æ–‡å­—å°é½Šï¼Œæˆ–è€…æ‚¨ä¹Ÿå¯ä»¥æ›æˆåœ–ç‰‡
                drawSeal(ctx, 500, stampY, 70, '#FDE68A');
                ctx.fillStyle = '#BE123C'; ctx.font = 'bold 36px "Noto Sans TC", sans-serif';
                ctx.fillText(luckText[0], 480, stampY - 5); ctx.fillText(luckText[1], 520, stampY - 5);
                ctx.fillText(luckText[2], 480, stampY + 35); ctx.fillText(luckText[3], 520, stampY + 35);

                // 8. åŸºé‡‘æœƒé å°¾è³‡è¨Š
                const footerY = 1820;
                ctx.fillStyle = '#e6e39c';
                ctx.font = 'bold 36px "Noto Sans TC", sans-serif'; 
                ctx.fillText("Â© 2026 æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ", 500, footerY);
                
                ctx.font = 'bold 32px "Noto Sans TC", sans-serif'; 
                ctx.fillText("ç‚ºæ„›å­¸ç¿’æŒçºŒç·´ç¿’ï¼Œæ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹", 500, footerY + 65);
            };

            function drawRect(ctx, x, y, w, h, r) {
                ctx.beginPath();
                ctx.moveTo(x + r, y);
                ctx.lineTo(x + w - r, y);
                ctx.quadraticCurveTo(x + w, y, x + w, y + r);
                ctx.lineTo(x + w, y + h - r);
                ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
                ctx.lineTo(x + r, y + h);
                ctx.quadraticCurveTo(x, y + h, x, y + h - r);
                ctx.lineTo(x, y + r);
                ctx.quadraticCurveTo(x, y, x + r, y);
                ctx.closePath();
            }

            function drawSeal(ctx, x, y, r, color) {
                ctx.save(); ctx.globalAlpha = 0.85; ctx.fillStyle = color; ctx.beginPath();
                for(let i=0; i<8; i++) {
                    const angle = (i/8) * Math.PI * 2;
                    const rr = r + (Math.random() * 8 - 4);
                    const px = x + Math.cos(angle) * rr;
                    const py = y + Math.sin(angle) * rr;
                    if(i===0) ctx.moveTo(px, py); else ctx.lineTo(px, py);
                }
                ctx.closePath(); ctx.fill(); ctx.restore();
            }

            const handleShare = async () => {
                if (navigator.share && finalImageUrl) {
                    try {
                        const blob = await (await fetch(finalImageUrl)).blob();
                        const file = new File([blob], 'GreetingCard2026.png', { type: 'image/png' });
                        await navigator.share({ files: [file], title: '2026 é¦¬å¹´è³€æ­²' });
                    } catch (err) { console.log('åˆ†äº«å–æ¶ˆ'); }
                }
            };

            return (
                <div className="min-h-screen pb-12 select-none">
                    <canvas ref={canvasRef} id="render-canvas" />

                    <header className="bg-red-800 text-yellow-100 pt-12 pb-16 px-6 text-center relative shadow-xl overflow-hidden">
                        <div className="relative z-10 flex flex-col items-center gap-2">
                            <div className="animate-bounce">
                                <div className="w-32 h-32 flex items-center justify-center overflow-hidden rounded-full bg-white/20 p-2 border-4 border-white/30 shadow-2xl">
                                    <img src={HEADER_IMG_URL} alt="Hero" className="max-w-full max-h-full object-contain" />
                                </div>
                            </div>
                            <h1 className="text-4xl font-bold tracking-[0.2em] drop-shadow-md">2026 ä¸™åˆé¦¬å¹´</h1>
                            <p className="text-red-100 mt-2 text-xl font-medium tracking-widest bg-white/10 px-6 py-1 rounded-full border border-white/20 backdrop-blur-sm">æ‰‹ç¹ªæ’ç•«æ„Ÿæ‹œå¹´è³€å¡</p>
                        </div>
                    </header>

                    <main className="max-w-xl mx-auto p-5 -mt-6 relative z-20">
                        <div className="flex items-center justify-around mb-12 bg-white/80 backdrop-blur p-4 rounded-3xl shadow-sm border border-red-50">
                            {[1, 2, 3].map((num) => (
                                <div key={num} className="flex flex-col items-center gap-2">
                                    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center font-bold text-xl transition-all ${step === num ? 'bg-red-600 text-white scale-110 shadow-lg' : step > num ? 'bg-red-100 text-red-700' : 'bg-white border-2 border-red-50 text-red-100'}`}>{num}</div>
                                    <span className={`text-sm font-bold ${step >= num ? 'text-red-900' : 'text-slate-300'}`}>{num === 1 ? 'è¨±å¿ƒé¡˜' : num === 2 ? 'å‚³ç…§ç‰‡' : 'çœ‹æˆå“'}</span>
                                </div>
                            ))}
                        </div>

                        {step === 1 && (
                            <div className="animate-in fade-in slide-in-from-bottom-8 duration-500 space-y-8">
                                <div className="bg-white/60 p-6 rounded-[2.5rem] border-2 border-red-100 shadow-sm space-y-4">
                                    <label className="text-xl font-bold text-slate-700 flex items-center gap-2"><Icon name="user" size={24} className="text-red-500" />æƒ³è©¢å•æ‚¨çš„è³€å¡æƒ³è¦æ€éº¼ç½²åï¼Ÿ</label>
                                    <input type="text" value={userName} onChange={(e) => setUserName(e.target.value)} placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜" className="w-full p-4 text-xl bg-white border-2 border-red-200 rounded-2xl focus:outline-none focus:border-red-500 transition-colors shadow-inner" />
                                    <p className="text-slate-400 text-base italic">â€» å°‡æœƒå°è£½åœ¨è³€å¡ä¸‹æ–¹çš„ç¥ç¦èªå¾Œæ–¹</p>
                                </div>
                                <div className="h-px bg-slate-200 w-full"></div>
                                <h2 className="text-2xl font-bold text-center text-slate-800 mb-8 font-serif">æ–°çš„ä¸€å¹´ï¼Œæ‚¨çš„é¡˜æœ›æ˜¯ï¼Ÿ</h2>
                                <div className="grid grid-cols-2 gap-5">
                                    {wishes.map((wish) => (
                                        <button key={wish.id} onClick={() => handleSelectWish(wish)} style={{ backgroundColor: wish.color }} className="group p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all border-2 border-transparent hover:border-red-400 flex flex-col items-center gap-3 relative overflow-hidden active:scale-95">
                                            <div className="mb-2 group-hover:scale-125 transition-transform animate-float"><Icon name={wish.icon} size={32} className="text-slate-600" /></div>
                                            <span className="text-2xl font-bold text-slate-800 tracking-wider">{wish.label}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {step === 2 && (
                            <div className="animate-in fade-in slide-in-from-bottom-8 duration-500 text-center space-y-8">
                                <h2 className="text-2xl font-bold text-center text-slate-800 font-serif">ç‚ºã€Œ{selectedWish?.label}ã€å¿ƒé¡˜æ‹å¼µç…§å§</h2>
                                <div className="relative group mx-auto max-w-sm">
                                    <input type="file" accept="image/*" onChange={handleFileUpload} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" />
                                    <div className="bg-white aspect-square rounded-[3.5rem] shadow-xl border-4 border-dashed border-red-100 flex flex-col items-center justify-center gap-6 group-hover:border-red-400 transition-colors p-10">
                                        <div className="w-24 h-24 bg-red-50 rounded-full flex items-center justify-center"><Icon name="camera" size={48} className="text-red-500" /></div>
                                        <div className="space-y-1"><p className="text-2xl font-bold text-slate-700">é»æ“Šä¸Šå‚³ç…§ç‰‡</p><p className="text-slate-400 text-lg">å»ºè­°é¸å–æ¸…æ™°çš„å…¨å®¶ç¦æˆ–ç¨ç…§</p></div>
                                    </div>
                                </div>
                                <button onClick={() => setStep(1)} className="text-slate-400 hover:text-red-700 font-bold text-xl flex items-center justify-center gap-2 mx-auto underline underline-offset-8 transition-colors"><Icon name="refresh-cw" size={20} /> é‡æ–°é¸é¡˜æœ›</button>
                            </div>
                        )}

                        {step === 3 && (
                            <div className="animate-in zoom-in-95 duration-700 space-y-10">
                                <h2 className="text-2xl font-bold text-center text-red-900 flex items-center justify-center gap-2 font-serif"><Icon name="sparkles" size={24} className="text-yellow-600" /> æ‚¨çš„é¦¬å¹´å°ˆå±¬è³€å¡å®Œæˆå›‰ï¼</h2>
                                
                                <div className="relative group max-w-[90%] mx-auto">
                                    <div className="relative shadow-2xl rounded-[3rem] overflow-hidden bg-white border-[12px] border-white ring-1 ring-black/5">
                                        {isGenerating ? (
                                            <div className="aspect-[1000/2000] w-full flex flex-col items-center justify-center gap-4 bg-slate-50/50">
                                                <div className="w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin"></div>
                                                <p className="font-bold text-red-800 text-xl tracking-widest animate-pulse">ç¹ªè£½è³€å¡ä¸­...</p>
                                            </div>
                                        ) : (
                                            <img src={finalImageUrl} alt="Greeting Card" className="saveable-image" />
                                        )}
                                    </div>
                                </div>

                                <div className="space-y-6 flex flex-col items-center w-full px-2">
                                    <div className="w-full bg-[#fefce8] border-2 border-dashed border-[#fde047] rounded-[2.5rem] p-6 text-center space-y-2 shadow-inner">
                                        <div className="flex justify-center"><Icon name="hand" size={32} className="text-[#854d0e] animate-hand" /></div>
                                        <p className="text-[#451a03] text-xl font-bold tracking-wider">ã€é•·æŒ‰ä¸Šæ–¹åœ–ç‰‡ã€‘å³å¯å„²å­˜åˆ°ç›¸ç°¿</p>
                                        <p className="text-[#854d0e] text-lg font-medium">å„²å­˜å¾Œå°±å¯ä»¥å‚³çµ¦ LINE è¦ªå‹å›‰ï¼</p>
                                    </div>

                                    <button 
                                        onClick={handleShare}
                                        className="w-full bg-[#449144] text-white py-6 rounded-[2.5rem] text-2xl font-bold shadow-[0_6px_0_0_#2d6a2d] active:shadow-none active:translate-y-1 transition-all flex items-center justify-center gap-3"
                                    >
                                        <Icon name="share-2" size={28} /> ç›´æ¥åˆ†äº«çµ¦è¦ªå‹
                                    </button>

                                    <button 
                                        onClick={() => {setStep(1); setUserName(''); setFinalImageUrl('');}} 
                                        className="text-[#475569] font-bold text-2xl py-4 tracking-[0.1em] hover:text-red-700 transition-colors"
                                    >
                                        å†åšä¸€å¼µè³€å¹´å¡
                                    </button>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="mt-16 px-8 max-w-xl mx-auto opacity-70 text-center space-y-6 pb-20">
                        <div className="h-px bg-slate-200 w-full"></div>
                        <p className="text-slate-500 font-light text-xl italic tracking-widest">
                            2026 ä¸™åˆé¦¬å¹´ Â· ç¥¥é¦¬ç»ç‘ Â· é¦¬åˆ°æˆåŠŸ
                        </p>
                        <div className="text-slate-400 font-light text-xl space-y-1">
                            <p>Â© 2026 æ„›ç›Ÿå®¶åº­æ–‡æ•™åŸºé‡‘æœƒ</p>
                            <p>ç‚ºæ„›å­¸ç¿’æŒçºŒç·´ç¿’ï¼Œæ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹</p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>